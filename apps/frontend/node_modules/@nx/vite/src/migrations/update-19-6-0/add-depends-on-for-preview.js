"use strict";
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _devkit = require("@nx/devkit");
const _executoroptionsutils = require("@nx/devkit/src/generators/executor-options-utils");
async function _default(tree) {
    (0, _executoroptionsutils.forEachExecutorOptions)(tree, '@nx/vite:preview-server', (_, projectName, targetName)=>{
        var _project_targets_targetName;
        const project = (0, _devkit.readProjectConfiguration)(tree, projectName);
        var _dependsOn;
        (_dependsOn = (_project_targets_targetName = project.targets[targetName]).dependsOn) != null ? _dependsOn : _project_targets_targetName.dependsOn = [];
        if (project.targets[targetName].dependsOn.includes('build')) {
            return;
        }
        project.targets[targetName].dependsOn.push('build');
        (0, _devkit.updateProjectConfiguration)(tree, projectName, project);
    });
    await (0, _devkit.formatFiles)(tree);
}

//# sourceMappingURL=add-depends-on-for-preview.js.map