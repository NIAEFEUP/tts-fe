{"version":3,"sources":["../../../../../../packages/vite/src/migrations/update-20-0-4/add-vite-temp-files-to-git-ignore.ts"],"sourcesContent":["import { Tree } from '@nx/devkit';\nimport { addViteTempFilesToGitIgnore as _addViteTempFilesToGitIgnore } from '../../utils/ignore-vite-temp-files';\n\nexport default function addViteTempFilesToGitIgnore(tree: Tree) {\n  // need to check if .gitignore exists before adding to it\n  // then need to check if it contains the following pattern\n  // **/vite.config.{js,ts,mjs,mts,cjs,cts}.timestamp*\n  // if it does, remove just this pattern\n  if (tree.exists('.gitignore')) {\n    const gitIgnoreContents = tree.read('.gitignore', 'utf-8');\n    if (\n      gitIgnoreContents.includes(\n        '**/vite.config.{js,ts,mjs,mts,cjs,cts}.timestamp*'\n      )\n    ) {\n      tree.write(\n        '.gitignore',\n        gitIgnoreContents.replace(\n          '**/vite.config.{js,ts,mjs,mts,cjs,cts}.timestamp*',\n          ''\n        )\n      );\n    }\n  }\n  _addViteTempFilesToGitIgnore(tree);\n}\n"],"names":["addViteTempFilesToGitIgnore","tree","exists","gitIgnoreContents","read","includes","write","replace","_addViteTempFilesToGitIgnore"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;","mappings":";+BAGA;;;eAAwBA;;;qCAFoD;AAE7D,SAASA,4BAA4BC,IAAU;IAC5D,yDAAyD;IACzD,0DAA0D;IAC1D,oDAAoD;IACpD,uCAAuC;IACvC,IAAIA,KAAKC,MAAM,CAAC,eAAe;QAC7B,MAAMC,oBAAoBF,KAAKG,IAAI,CAAC,cAAc;QAClD,IACED,kBAAkBE,QAAQ,CACxB,sDAEF;YACAJ,KAAKK,KAAK,CACR,cACAH,kBAAkBI,OAAO,CACvB,qDACA;QAGN;IACF;IACAC,IAAAA,gDAA4B,EAACP;AAC/B"}