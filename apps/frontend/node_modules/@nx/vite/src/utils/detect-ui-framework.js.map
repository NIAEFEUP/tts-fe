{"version":3,"sources":["../../../../../packages/vite/src/utils/detect-ui-framework.ts"],"sourcesContent":["import { createProjectGraphAsync } from '@nx/devkit';\n\nconst ANGULAR_NPM_SCOPE = 'angular';\nconst ANGULAR_DEPS = ['@nx/angular'];\nconst REACT_DEPS = ['react', '@nx/react'];\n\nexport async function detectUiFramework(\n  project: string\n): Promise<'angular' | 'react' | 'none'> {\n  const graph = await createProjectGraphAsync();\n\n  for (const dep of graph.dependencies[project] ?? []) {\n    if (dep.source !== project || !dep.target.startsWith('npm:')) {\n      continue;\n    }\n\n    const npmDependency = dep.target.replace('npm:', '');\n\n    if (\n      dep.target.startsWith(`npm:@${ANGULAR_NPM_SCOPE}/`) ||\n      ANGULAR_DEPS.includes(npmDependency)\n    ) {\n      return 'angular';\n    }\n\n    if (REACT_DEPS.includes(npmDependency)) {\n      return 'react';\n    }\n  }\n\n  return 'none';\n}\n"],"names":["detectUiFramework","ANGULAR_NPM_SCOPE","ANGULAR_DEPS","REACT_DEPS","project","graph","createProjectGraphAsync","dep","dependencies","source","target","startsWith","npmDependency","replace","includes"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";+BAMsBA;;;eAAAA;;;wBANkB;AAExC,MAAMC,oBAAoB;AAC1B,MAAMC,eAAe;IAAC;CAAc;AACpC,MAAMC,aAAa;IAAC;IAAS;CAAY;AAElC,eAAeH,kBACpBI,OAAe;IAEf,MAAMC,QAAQ,MAAMC,IAAAA,+BAAuB;QAEzBD;IAAlB,KAAK,MAAME,OAAOF,CAAAA,8BAAAA,MAAMG,YAAY,CAACJ,QAAQ,YAA3BC,8BAA+B,EAAE,CAAE;QACnD,IAAIE,IAAIE,MAAM,KAAKL,WAAW,CAACG,IAAIG,MAAM,CAACC,UAAU,CAAC,SAAS;YAC5D;QACF;QAEA,MAAMC,gBAAgBL,IAAIG,MAAM,CAACG,OAAO,CAAC,QAAQ;QAEjD,IACEN,IAAIG,MAAM,CAACC,UAAU,CAAC,CAAC,KAAK,EAAEV,kBAAkB,CAAC,CAAC,KAClDC,aAAaY,QAAQ,CAACF,gBACtB;YACA,OAAO;QACT;QAEA,IAAIT,WAAWW,QAAQ,CAACF,gBAAgB;YACtC,OAAO;QACT;IACF;IAEA,OAAO;AACT"}