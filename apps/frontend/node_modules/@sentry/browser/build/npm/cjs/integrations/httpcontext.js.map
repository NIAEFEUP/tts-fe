{"version":3,"file":"httpcontext.js","sources":["../../../../src/integrations/httpcontext.ts"],"sourcesContent":["import { defineIntegration } from '@sentry/core';\nimport { WINDOW } from '../helpers';\n\n/**\n * Collects information about HTTP request headers and\n * attaches them to the event.\n */\nexport const httpContextIntegration = defineIntegration(() => {\n  return {\n    name: 'HttpContext',\n    preprocessEvent(event) {\n      // if none of the information we want exists, don't bother\n      if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n        return;\n      }\n\n      // grab as much info as exists and add it to the event\n      const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n      const { referrer } = WINDOW.document || {};\n      const { userAgent } = WINDOW.navigator || {};\n\n      const headers = {\n        ...(event.request && event.request.headers),\n        ...(referrer && { Referer: referrer }),\n        ...(userAgent && { 'User-Agent': userAgent }),\n      };\n      const request = { ...event.request, ...(url && { url }), headers };\n\n      event.request = request;\n    },\n  };\n});\n"],"names":["defineIntegration","WINDOW"],"mappings":";;;;;AAGA;AACA;AACA;AACA;MACa,sBAAuB,GAAEA,sBAAiB,CAAC,MAAM;AAC9D,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,aAAa;AACvB,IAAI,eAAe,CAAC,KAAK,EAAE;AAC3B;AACA,MAAM,IAAI,CAACC,cAAM,CAAC,aAAa,CAACA,cAAM,CAAC,YAAY,CAACA,cAAM,CAAC,QAAQ,EAAE;AACrE,QAAQ;AACR;;AAEA;AACA,MAAM,MAAM,GAAI,GAAE,CAAC,KAAK,CAAC,OAAQ,IAAG,KAAK,CAAC,OAAO,CAAC,GAAG,MAAMA,cAAM,CAAC,QAAA,IAAYA,cAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACnG,MAAM,MAAM,EAAE,QAAA,EAAW,GAAEA,cAAM,CAAC,QAAA,IAAY,EAAE;AAChD,MAAM,MAAM,EAAE,SAAA,EAAY,GAAEA,cAAM,CAAC,SAAA,IAAa,EAAE;;AAElD,MAAM,MAAM,UAAU;AACtB,QAAQ,IAAI,KAAK,CAAC,OAAA,IAAW,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;AACnD,QAAQ,IAAI,QAAS,IAAG,EAAE,OAAO,EAAE,QAAS,EAAC,CAAC;AAC9C,QAAQ,IAAI,SAAU,IAAG,EAAE,YAAY,EAAE,SAAU,EAAC,CAAC;AACrD,OAAO;AACP,MAAM,MAAM,OAAQ,GAAE,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,IAAI,GAAA,IAAO,EAAE,GAAA,EAAK,CAAC,EAAE,SAAS;;AAExE,MAAM,KAAK,CAAC,OAAQ,GAAE,OAAO;AAC7B,KAAK;AACL,GAAG;AACH,CAAC;;;;"}